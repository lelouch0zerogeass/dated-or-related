<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Dated or Related?</title>
  <style>
    body { text-align:center; font-family:sans-serif; margin:2em }
    img  { max-width:80%; border:2px solid #666; border-radius:6px }
    button { margin:0.5em; padding:0.5em 1em }
    #msg  { font-weight:bold; margin-top:1em }
  </style>
</head>
<body>
  <h1>Dated or Related?</h1>
  <img id="pic" src="" alt="Pair photo">
  <div>
    <button id="btnR">Related</button>
    <button id="btnD">Dated</button>
    <button id="btnN" style="display:none">Next</button>
  </div>
  <p id="msg"></p>
  <p id="score"></p>
  <script>
    let data=[], idx=0, score=0;
    const pic=document.getElementById('pic'),
          msg=document.getElementById('msg'),
          scoreEl=document.getElementById('score'),
          bR=document.getElementById('btnR'),
          bD=document.getElementById('btnD'),
          bN=document.getElementById('btnN');

    fetch('data/questions.json')
      .then(r=>r.json())
      .then(a=>{
        const seen=new Set();
        data=a.filter(q=>{
          if(seen.has(q.family)) return false;
          seen.add(q.family);
          return true;
        });
        showQ();
      });

    function showQ(){
      if(idx>=data.length){
        document.body.innerHTML =
          `<h2>Game Over!</h2>
           <p>Your Score: ${score} / ${data.length}</p>`;
        return;
      }
      pic.src=data[idx].file;
      msg.textContent='';
      scoreEl.textContent=`Score: ${score} / ${idx}`;
      bR.disabled=bD.disabled=false;
      bN.style.display='none';
    }

    function handle(c){
      const ans=data[idx].answer;
      bR.disabled=bD.disabled=true;
      if(c===ans){
        score++; msg.textContent=`✔️ Correct! It was “${ans}”`;
      } else {
        msg.textContent=`❌ Wrong! It was “${ans}”`;
      }
      bN.style.display='inline';
    }

    bR.onclick=()=>handle('related');
    bD.onclick=()=>handle('dated');
    bN.onclick=()=>{ idx++; showQ() };
  </script>
</body>
</html>
